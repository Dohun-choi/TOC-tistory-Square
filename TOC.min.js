function n(n){return`${n.tagName}-${n.offsetTop}`}const t="article-view";window.addEventListener("scroll",e);const o=document.getElementById(t);function c(t){t.id=n(t);const o=document.createElement("a");o.textContent=t.textContent,o.href=`#${n(t)}`,o.id=`TOC-${n(t)}`,o.classList.add(`${t.tagName.toLowerCase()}-TOC`);const c=document.createElement("li");return c.appendChild(o),c}function e(){const n="active_TOC",o=document.getElementById(t);if(!o)return;const c=Array.from(o.querySelectorAll("h2, h3")),e=window.scrollY,r=window.scrollY+window.innerHeight/1.5,s=c.filter((n=>{const t=n.getBoundingClientRect(),o=t.top+window.scrollY,c=o+t.height;return o<=r&&c>=e}));let d;if(s.length>0)d=s[0];else{const n=c.filter((n=>{const t=n.getBoundingClientRect();return t.top+window.scrollY+t.height<e}));n.length>0&&(d=n[n.length-1])}const l=i(d);l&&(c.forEach((t=>{i(t)?.classList.remove(n)})),l.classList.add(n),u(l,"table-of-contents"))}function u(n,t){const o=document.getElementById(t);if(!o)return;const c=o.getBoundingClientRect(),e=n.getBoundingClientRect(),u=e.top-c.top+o.scrollTop+e.height/2-c.height/2;o.scrollTo({top:u})}function i(n){let t;return n?(t=document.getElementById(`TOC-${n.id}`),t):null}!function(n){if(!n)return;const t=n.querySelectorAll("h2, h3"),o=document.querySelector("#table-of-contents"),e=document.createElement("ul");o?.appendChild(e),e.id="TOC-list",t.forEach((n=>{const t=c(n);("H2"===n.tagName||"H3"===n.tagName)&&e.appendChild(t)}))}(o);