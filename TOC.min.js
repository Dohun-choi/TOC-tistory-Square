const n={t:n=>`h2-${n.offsetTop}`,o:n=>`h3-${n.offsetTop}`},t="article-view";window.addEventListener("scroll",c);const o=document.getElementById(t);function c(){const n="active_TOC",o=document.getElementById(t);if(!o)return;const c=Array.from(o.querySelectorAll("h2, h3")),i=window.scrollY,s=window.scrollY+window.innerHeight/2,l=c.filter((n=>{const t=n.getBoundingClientRect(),o=t.top+window.scrollY,c=o+t.height;return o<=s&&c>=i}));let d;if(l.length>0)d=l[0];else{const n=c.filter((n=>{const t=n.getBoundingClientRect();return t.top+window.scrollY+t.height<i}));n.length>0&&(d=n[n.length-1])}const r=u(d);r&&(c.forEach((t=>{u(t)?.classList.remove(n)})),r.classList.add(n),e(r,"table-of-contents"))}function e(n,t){const o=document.getElementById(t);if(!o)return;const c=o.getBoundingClientRect(),e=n.getBoundingClientRect(),u=e.top-c.top+o.scrollTop+e.height/2-c.height/2;o.scrollTo({top:u,behavior:"smooth"})}function u(n){let t;return n?(n.tagName,t=document.getElementById(`TOC-${n.id}`),t):null}!function(t){if(!t)return;const o=t.querySelectorAll("h2, h3"),c=document.querySelector("#table-of-contents"),e=document.createElement("ul");c?.appendChild(e),e.id="TOC-list";let u=null;o.forEach((t=>{if("H2"===t.tagName){t.id=n.t(t);const o=document.createElement("li"),c=document.createElement("a");c.textContent=t.textContent,c.href=`#${n.t(t)}`,c.id=`TOC-${n.t(t)}`,c.classList.add("h2-TOC"),o.appendChild(c),u=document.createElement("ul"),o.appendChild(u),e.appendChild(o)}else if("H3"===t.tagName&&(t.id=n.o(t),u)){const o=document.createElement("li"),c=document.createElement("a");c.textContent=t.textContent,c.href=`#${n.o(t)}`,c.id=`TOC-${n.o(t)}`,c.classList.add("h3-TOC"),o.appendChild(c),u.appendChild(o)}}))}(o);